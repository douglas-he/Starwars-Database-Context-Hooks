(this["webpackJsonpreact-context-hooks-starwars-datatable-filters"]=this["webpackJsonpreact-context-hooks-starwars-datatable-filters"]||[]).push([[0],{10:function(e,t,n){e.exports=n(17)},15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(9),c=n.n(u),o=(n(15),n(16),n(3)),l=n(7),i=n(2),s=n(1),m=function(){return fetch("https://cors-anywhere.herokuapp.com/https://swapi-trybe.herokuapp.com/api/planets").then((function(e){return e.json().then((function(t){return e.ok?Promise.resolve(t):Promise.reject(t)}))}))},f=Object(a.createContext)(),b=function(e){var t=e.children,n=Object(a.useState)(!1),u=Object(s.a)(n,2),c=u[0],b=u[1],d=Object(a.useState)(null),p=Object(s.a)(d,2),v=p[0],E=p[1],j=Object(a.useState)([]),O=Object(s.a)(j,2),h=O[0],g=O[1],k=Object(a.useState)([{name:"",column:"name",order:"ASC"}]),C=Object(s.a)(k,2),y=C[0],S=C[1],x=Object(a.useState)([]),N=Object(s.a)(x,2),w=N[0],F=N[1];Object(a.useEffect)((function(){var e=Object(i.a)(h);y.forEach((function(t){e=function(e,t){var n=e.numericValues,a=void 0===n?{}:n,r=a.column,u=void 0===r?"":r,c=a.value,o=a.comparison;switch(void 0===o?"":o){case"menor que":return t.filter((function(e){return Number(e[u])<Number(c)}));case"maior que":return t.filter((function(e){return Number(e[u])>Number(c)}));case"igual a":return t.filter((function(e){return Number(e[u])===Number(c)}));default:return t}}(t,e)}));var t=e.filter((function(e){return function(e){return e.match(new RegExp(y[0].name,"i"))}(e.name)})),n=e.length>0?function(e,t){var n=e.column,a=e.order;return["rotation_period","orbital_period","diameter","surface_water","population"].includes(n)?"ASC"===a?t.sort((function(e,t){return Number(e[n])<Number(t[n])?1:-1})):t.sort((function(e,t){return Number(e[n])<Number(t[n])?-1:1})):"ASC"===a?t.sort((function(e,t){return e[n]<t[n]?-1:1})):t.sort((function(e,t){return e[n]<t[n]?1:-1}))}(y[0],t):[];F(n)}),[y,h]);var P=function(e){var t=e.results;g(t),F(t),b(!0)},A=function(e){E(e.message),b(!0)},V={fetchPlanets:function(){m().then(P,A)},isFetching:c,error:v,data:h,filterName:function(e){var t=Object(l.a)(y),n=t[0],a=t.slice(1);n.name=e,S([Object(o.a)({},n)].concat(Object(i.a)(a)))},filtredPlanets:w,addFilter:function(e,t,n){S(void 0!==y[0].numericValues?[].concat(Object(i.a)(y),[{numericValues:{column:e,comparison:t,value:n}}]):[Object(o.a)({},y[0],{numericValues:{column:e,comparison:t,value:n}})])},filters:y,excludeFilter:function(e){var t=y[0],n=t.name,a=t.column,r=t.order,u=y.filter((function(t){return t.numericValues.column!==e}));u[0]=Object(o.a)({name:n,column:a,order:r},u[0]),S(u)},filtersAscDesc:function(e){var t=Object(l.a)(y),n=t[0],a=t.slice(1);n.column=e,n.order="ASC"===n.order?"DESC":"ASC",S([Object(o.a)({},n)].concat(Object(i.a)(a)))}};return r.a.createElement(f.Provider,{value:V},t)},d=function(){var e=Object(a.useContext)(f),t=e.data,n=e.filtersAscDesc;return r.a.createElement("thead",null,r.a.createElement("tr",null,Object.keys(t[0]).map((function(e){return"residents"!==e&&r.a.createElement("th",{key:e},r.a.createElement("button",{"data-testid":e,type:"button",value:e,onClick:function(e){var t=e.target;return n(t.value)}},e))}))))},p=function(){var e=Object(a.useContext)(f).filtredPlanets;return r.a.createElement("tbody",null,e.map((function(e,t){return r.a.createElement("tr",{"data-testid":"planet".concat(t),key:e.name},Object.values(e).map((function(t,n){return"residents"!==Object.keys(e)[n]&&r.a.createElement("td",{key:t},t)})))})))},v=function(){var e=Object(a.useState)(["population","orbital_period","diameter","rotation_period","surface_water"]),t=Object(s.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)(""),o=Object(s.a)(c,2),l=o[0],m=o[1],b=Object(a.useState)(""),d=Object(s.a)(b,2),p=d[0],v=d[1],E=Object(a.useState)(""),j=Object(s.a)(E,2),O=j[0],h=j[1],g=Object(a.useContext)(f),k=g.addFilter,C=g.filters,y=g.excludeFilter,S=function(e){u([].concat(Object(i.a)(n),[e])),y(e)};return r.a.createElement("div",null,n.length>0&&r.a.createElement("div",null,function(e,t){return r.a.createElement("select",{"data-testid":"column",onChange:function(e){var n=e.target;return t(n.value)}},r.a.createElement("option",{value:""}),e.map((function(e){return r.a.createElement("option",{key:e},e)})))}(n,m),l&&function(e,t){return r.a.createElement("select",{"data-testid":"comparison",onChange:function(e){var n=e.target;return t(n.value)}},r.a.createElement("option",{value:""}),e.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))}(["maior que","menor que","igual a"],v),p&&function(e){return r.a.createElement("input",{"data-testid":"value",type:"number",onChange:function(t){var n=t.target;return e(n.value)}})}(h),O&&function(e){return r.a.createElement("button",{type:"button","data-testid":"filter",onClick:e},"Filtrar")}((function(){u(n.filter((function(e){return e!==l}))),k(l,p,O),m(""),v(""),h("")}))),r.a.createElement("div",null,C[0].numericValues&&C.map((function(e){return function(e,t){return r.a.createElement("div",{"data-testid":"infoExclude",key:e.column},r.a.createElement("span",null,"".concat(e.column," ")),r.a.createElement("span",null,"".concat(e.comparison," ")),r.a.createElement("span",null,"".concat(e.value," ")),r.a.createElement("button",{"data-testid":"removeFilter",value:e.column,onClick:function(e){return t(e.target.value)},type:"button"},"X"))}(e.numericValues,S)}))))},E=function(){var e=Object(a.useContext)(f),t=e.fetchPlanets,n=e.error,u=e.isFetching,c=e.filterName;return Object(a.useEffect)(t,[]),u?n||r.a.createElement("div",null,r.a.createElement("h1",null,"Starwars Planets"),r.a.createElement("input",{"data-testid":"input-name",type:"text",onChange:function(e){var t=e.target.value;return c(t)}}),r.a.createElement(v,null),r.a.createElement("table",{border:"1px"},r.a.createElement(d,null),r.a.createElement(p,null))):r.a.createElement("h1",null,"Loading")};var j=function(){return r.a.createElement(b,null,r.a.createElement(E,null))};c.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.15c8c12c.chunk.js.map